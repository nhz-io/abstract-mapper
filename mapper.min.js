(function(){var d,e;d=function(c,a){var b;this.map=c;this.target=this.parent=this.data=null;for(b in a)Object.hasOwnProperty.call(a,b)&&(this[b]=a[b])};d.prototype={mapper:function(c){if(this.map){var a,b;this.data=c;(this.map["!"]||function(){this.target=[]}).call(this);if(c instanceof Array)for(a=0;a<this.data.length;a+=1)c=this.data[a],b=this.clone(),b.idx=a,b.parent=this,b.mapper(c);else for(a in this.map)Object.hasOwnProperty.call(this.map,a)&&void 0!==this.data[a]&&"!"!==a&&(c=this.data[a], b=this.map[a],"function"===typeof b?b.call(this,c):(b=this.clone(),b.parent=this,b.mapper(c)))}return this.target},clone:function(){return new d(null,this)}};e=function(c,a){var b=new d(c,a);return function mapper(a){return b.mapper(a)}};"undefined"!==typeof module?module.exports=e:"undefined"!==typeof window&&(window.AbstractMapper=e)})();
